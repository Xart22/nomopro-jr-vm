const ArgumentType = require("../../extension-support/argument-type");
const BlockType = require("../../extension-support/block-type");
const Cast = require("../../util/cast");
const MathUtil = require("../../util/math-util");
const log = require("../../util/log");
const formatMessage = require("format-message");
const ml5 = require("ml5");
const blockIconURI =
    "data:image/png;base64,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";
const path = require("path");

const Message = {
    image_classification_model_url: {
        en: "image classification model URL [URL]",
    },
    image_classification_sample_model_url: {
        en: " ",
    },
    classify_image: {
        en: "classify image",
    },
    image_label: {
        en: "image label",
    },
    when_received_block: {
        en: "when received image label:[LABEL]",
    },
    is_image_label_detected: {
        en: "image [LABEL] detected",
    },

    image_label_confidence: {
        en: "confidence of image [LABEL]",
    },
    label_block: {
        en: "label",
    },
    any: {
        en: "any",
    },
    any_without_of: {
        en: "any",
    },
    all: {
        en: "all",
    },
    toggle_classification: {
        en: "turn classification [CLASSIFICATION_STATE]",
    },
    set_confidence_threshold: {
        en: "set confidence threshold [CONFIDENCE_THRESHOLD]",
    },
    get_confidence_threshold: {
        en: "get confidence threshold",
    },
    set_classification_interval: {
        en: "Label once every [CLASSIFICATION_INTERVAL] seconds",
    },
    video_toggle: {
        en: "turn [VIDEO_STATE] video on stage with [TRANSPARENCY] transparency ",
    },
    on: {
        en: "on",
    },
    off: {
        en: "off",
    },
    video_on_flipped: {
        en: "on flipped",
    },
    webcam: {
        en: "webcam",
    },
    stage: {
        en: "stage",
    },
    set_input: {
        en: "Classify image From [INPUT] ",
    },

    sound_label: {
        en: "sound label",
    },
    is_sound_label_detected: {
        en: "sound [LABEL] detected",
    },
    sound_label_confidence: {
        en: "confidence of sound [LABEL]",
    },
    when_received_sound_label_block: {
        en: "when received sound label:[LABEL]",
    },
    sound_classification_model_url: {
        en: "sound classification model URL [URL]",
    },
    sound_classification_sample_model_url: {
        en: " ",
    },
};

class tm2scratchBlocks {
    constructor(runtime) {
        this.runtime = runtime;
        this.locale = "en";

        this.interval = 1000;
        this.minInterval = 100;

        this.globalVideoTransparency = 0;
        this.setVideoTransparency({
            TRANSPARENCY: this.globalVideoTransparency,
        });

        this.canvas = document.querySelector("canvas");

        this.timer = setInterval(() => {
            this.classifyVideoImage();
        }, this.minInterval);

        this.imageModelUrl = null;
        this.imageMetadata = null;
        this.imageClassifier = null;
        this.initImageProbableLabels();
        this.confidenceThreshold = 0.5;

        this.soundModelUrl = null;
        this.soundMetadata = null;
        this.soundClassifier = null;
        this.soundClassifierEnabled = false;
        this.initSoundProbableLabels();
    }

    /**
     * Initialize the result of image classification.
     */
    initImageProbableLabels() {
        this.imageProbableLabels = [];
    }

    initSoundProbableLabels() {
        this.soundProbableLabels = [];
    }

    get EXTENSION_ID() {
        return "tm2scratch";
    }

    get globalVideoTransparency() {
        const stage = this.runtime.getTargetForStage();
        if (stage) {
            return stage.videoTransparency;
        }
        return 50;
    }

    set globalVideoTransparency(transparency) {
        const stage = this.runtime.getTargetForStage();
        if (stage) {
            stage.videoTransparency = transparency;
        }
        return transparency;
    }

    getInfo() {
        return [
            {
                id: "tm2scratch",

                name: formatMessage({
                    id: "tm2scratch.categoryName",
                    default: "tm2scratch",
                    description: "Name of the tm2scratch extension category",
                }),

                blockIconURI: blockIconURI,
                blocks: [
                    {
                        opcode: "whenReceived",
                        text: Message.when_received_block[this.locale],
                        blockType: BlockType.HAT,
                        arguments: {
                            LABEL: {
                                type: ArgumentType.STRING,
                                menu: "received_menu",
                                defaultValue: Message.any[this.locale],
                            },
                        },
                    },
                    {
                        opcode: "setInput",
                        text: Message.set_input[this.locale],
                        blockType: BlockType.COMMAND,
                        arguments: {
                            INPUT: {
                                type: ArgumentType.STRING,
                                menu: "input_menu",
                                defaultValue: "webcam",
                            },
                        },
                    },
                    {
                        opcode: "isImageLabelDetected",
                        text: Message.is_image_label_detected[this.locale],
                        blockType: BlockType.BOOLEAN,
                        arguments: {
                            LABEL: {
                                type: ArgumentType.STRING,
                                menu: "image_labels_menu",
                                defaultValue:
                                    Message.any_without_of[this.locale],
                            },
                        },
                    },
                    {
                        opcode: "imageLabelConfidence",
                        text: Message.image_label_confidence[this.locale],
                        blockType: BlockType.REPORTER,
                        disableMonitor: true,
                        arguments: {
                            LABEL: {
                                type: ArgumentType.STRING,
                                menu: "image_labels_without_any_menu",
                                defaultValue: "",
                            },
                        },
                    },
                    {
                        opcode: "setImageClassificationModelURL",
                        text: Message.image_classification_model_url[
                            this.locale
                        ],
                        blockType: BlockType.COMMAND,
                        arguments: {
                            URL: {
                                type: ArgumentType.STRING,
                                defaultValue:
                                    Message
                                        .image_classification_sample_model_url[
                                        this.locale
                                    ],
                            },
                        },
                    },
                    {
                        opcode: "classifyVideoImageBlock",
                        text: Message.classify_image[this.locale],
                        blockType: BlockType.COMMAND,
                    },
                    {
                        opcode: "getImageLabel",
                        text: Message.image_label[this.locale],
                        blockType: BlockType.REPORTER,
                    },

                    "---",
                    {
                        opcode: "whenReceivedSoundLabel",
                        text: Message.when_received_sound_label_block[
                            this.locale
                        ],
                        blockType: BlockType.HAT,
                        arguments: {
                            LABEL: {
                                type: ArgumentType.STRING,
                                menu: "received_sound_label_menu",
                                defaultValue: Message.any[this.locale],
                            },
                        },
                    },
                    {
                        opcode: "isSoundLabelDetected",
                        text: Message.is_sound_label_detected[this.locale],
                        blockType: BlockType.BOOLEAN,
                        arguments: {
                            LABEL: {
                                type: ArgumentType.STRING,
                                menu: "sound_labels_menu",
                                defaultValue:
                                    Message.any_without_of[this.locale],
                            },
                        },
                    },
                    {
                        opcode: "soundLabelConfidence",
                        text: Message.sound_label_confidence[this.locale],
                        blockType: BlockType.REPORTER,
                        disableMonitor: true,
                        arguments: {
                            LABEL: {
                                type: ArgumentType.STRING,
                                menu: "sound_labels_without_any_menu",
                                defaultValue: "",
                            },
                        },
                    },
                    {
                        opcode: "setSoundClassificationModelURL",
                        text: Message.sound_classification_model_url[
                            this.locale
                        ],
                        blockType: BlockType.COMMAND,
                        arguments: {
                            URL: {
                                type: ArgumentType.STRING,
                                defaultValue:
                                    Message
                                        .sound_classification_sample_model_url[
                                        this.locale
                                    ],
                            },
                        },
                    },
                    {
                        opcode: "getSoundLabel",
                        text: Message.sound_label[this.locale],
                        blockType: BlockType.REPORTER,
                    },
                    "---",
                    {
                        opcode: "toggleClassification",
                        text: Message.toggle_classification[this.locale],
                        blockType: BlockType.COMMAND,
                        arguments: {
                            CLASSIFICATION_STATE: {
                                type: ArgumentType.STRING,
                                menu: "classification_menu",
                                defaultValue: "off",
                            },
                        },
                    },
                    {
                        opcode: "setClassificationInterval",
                        text: Message.set_classification_interval[this.locale],
                        blockType: BlockType.COMMAND,
                        arguments: {
                            CLASSIFICATION_INTERVAL: {
                                type: ArgumentType.STRING,
                                menu: "classification_interval_menu",
                                defaultValue: "1",
                            },
                        },
                    },
                    {
                        opcode: "setConfidenceThreshold",
                        text: Message.set_confidence_threshold[this.locale],
                        blockType: BlockType.COMMAND,
                        arguments: {
                            CONFIDENCE_THRESHOLD: {
                                type: ArgumentType.NUMBER,
                                defaultValue: 0.5,
                            },
                        },
                    },
                    {
                        opcode: "getConfidenceThreshold",
                        text: Message.get_confidence_threshold[this.locale],
                        blockType: BlockType.REPORTER,
                        disableMonitor: true,
                    },
                    {
                        opcode: "videoToggle",
                        text: Message.video_toggle[this.locale],
                        blockType: BlockType.COMMAND,
                        arguments: {
                            VIDEO_STATE: {
                                type: ArgumentType.STRING,
                                menu: "video_menu",
                                defaultValue: "on",
                            },
                            TRANSPARENCY: {
                                type: ArgumentType.NUMBER,
                                defaultValue: 0,
                            },
                        },
                    },
                ],
                menus: {
                    received_menu: {
                        acceptReporters: true,
                        items: "getLabelsMenu",
                    },
                    image_labels_menu: {
                        acceptReporters: true,
                        items: "getLabelsWithAnyWithoutOfMenu",
                    },
                    image_labels_without_any_menu: {
                        acceptReporters: true,
                        items: "getLabelsWithoutAnyMenu",
                    },
                    received_sound_label_menu: {
                        acceptReporters: true,
                        items: "getSoundLabelsWithoutBackgroundMenu",
                    },
                    sound_labels_menu: {
                        acceptReporters: true,
                        items: "getSoundLabelsWithoutBackgroundWithAnyWithoutOfMenu",
                    },
                    sound_labels_without_any_menu: {
                        acceptReporters: true,
                        items: "getSoundLabelsWithoutAnyMenu",
                    },
                    video_menu: this.getVideoMenu(),
                    classification_interval_menu:
                        this.getClassificationIntervalMenu(),
                    classification_menu: this.getClassificationMenu(),
                    input_menu: [
                        {
                            text: Message.webcam[this.locale],
                            value: "webcam",
                        },
                        {
                            text: Message.stage[this.locale],
                            value: "stage",
                        },
                    ],
                },
            },
        ];
    }

    setVideoTransparency(args) {
        const transparency = Cast.toNumber(args.TRANSPARENCY);
        this.globalVideoTransparency = transparency;
        this.runtime.ioDevices.video.setPreviewGhost(transparency);
    }

    whenReceived(args) {
        const label = this.getImageLabel();
        if (args.LABEL === Message.any[this.locale]) {
            return label !== "";
        }
        return label === args.LABEL;
    }
    whenReceivedSoundLabel(args) {
        if (!this.soundClassifierEnabled) {
            return;
        }

        const label = this.getSoundLabel();
        if (args.LABEL === Message.any[this.locale]) {
            return label !== "";
        }
        return label === args.LABEL;
    }
    isSoundLabelDetected(args) {
        const label = this.getSoundLabel();
        if (args.LABEL === Message.any[this.locale]) {
            return label !== "";
        }
        return label === args.LABEL;
    }

    soundLabelConfidence(args) {
        if (!this.soundProbableLabels || this.soundProbableLabels.length === 0)
            return 0;

        if (args.LABEL === "") {
            return 0;
        }
        const entry = this.soundProbableLabels.find(
            (element) => element.label === args.LABEL
        );
        return entry ? entry.confidence : 0;
    }

    setSoundClassificationModelURL(args) {
        return this.loadSoundClassificationModelFromURL(args.URL);
    }
    loadSoundClassificationModelFromURL(url) {
        return new Promise((resolve) => {
            fetch(`${url}metadata.json`)
                .then((res) => res.json())
                .then((metadata) => {
                    if (
                        url === this.soundModelUrl &&
                        new Date(metadata.timeStamp).getTime() ===
                            new Date(this.soundMetadata.timeStamp).getTime()
                    ) {
                        log.info(`sound model already loaded: ${url}`);
                        resolve();
                    } else {
                        ml5.soundClassifier(`${url}model.json`)
                            .then((classifier) => {
                                this.soundModelUrl = url;
                                this.soundMetadata = metadata;
                                this.soundClassifier = classifier;
                                this.initSoundProbableLabels();
                                this.soundClassifierEnabled = true;
                                this.classifySound();
                                log.info(`sound model loaded from: ${url}`);
                            })
                            .catch((error) => {
                                log.warn(error);
                            })
                            .finally(() => resolve());
                    }
                })
                .catch((error) => {
                    log.warn(error);
                    resolve();
                });
        });
    }

    isImageLabelDetected(args) {
        const label = this.getImageLabel();
        if (args.LABEL === Message.any[this.locale]) {
            return label !== "";
        }
        return label === args.LABEL;
    }

    imageLabelConfidence(args) {
        if (args.LABEL === "") {
            return 0;
        }
        const entry = this.imageProbableLabels.find(
            (element) => element.label === args.LABEL
        );
        return entry ? entry.confidence : 0;
    }

    setImageClassificationModelURL(args) {
        return this.loadImageClassificationModelFromURL(args.URL);
    }

    loadImageClassificationModelFromURL(url) {
        return new Promise((resolve) => {
            const modelId = path.basename(url);
            const storageUrl = `https://storage.googleapis.com/tm-model/${modelId}/`;
            const timestamp = new Date().getTime();
            fetch(`${storageUrl}metadata.json?${timestamp}`)
                .then((res) => res.json())
                .then((metadata) => {
                    if (
                        url === this.imageModelUrl &&
                        new Date(metadata.timeStamp).getTime() ===
                            new Date(this.imageMetadata.timeStamp).getTime()
                    ) {
                        log.info(`image model already loaded: ${url}`);
                        resolve();
                    } else {
                        ml5.imageClassifier(
                            `${storageUrl}model.json?${timestamp}`
                        )
                            .then((classifier) => {
                                this.imageModelUrl = url;
                                this.imageMetadata = metadata;
                                this.imageClassifier = classifier;
                                this.initImageProbableLabels();
                                log.info(`image model loaded from: ${url}`);
                            })
                            .catch((error) => {
                                log.warn(error);
                            })
                            .finally(() => resolve());
                    }
                })
                .catch((error) => {
                    log.warn(error);
                    resolve();
                });
        });
    }

    getLabelsMenu() {
        let items = [Message.any[this.locale]];
        if (!this.imageMetadata) return items;
        items = items.concat(this.imageMetadata.labels);
        return items;
    }

    getLabelsWithAnyWithoutOfMenu() {
        let items = [Message.any_without_of[this.locale]];
        if (!this.imageMetadata) return items;
        items = items.concat(this.imageMetadata.labels);
        return items;
    }

    getLabelsWithoutAnyMenu() {
        let items = [""];
        if (this.imageMetadata) {
            items = items.concat(this.imageMetadata.labels);
        }
        return items;
    }

    getMostProbableOne(probabilities) {
        if (probabilities.length === 0) return null;
        let mostOne = probabilities[0];
        probabilities.forEach((clss) => {
            if (clss.confidence > mostOne.confidence) {
                mostOne = clss;
            }
        });
        return mostOne;
    }

    classifyVideoImageBlock(_args, util) {
        if (this._isImageClassifying) {
            if (util) util.yield();
            return;
        }
        return new Promise((resolve) => {
            this.classifyImage(this.input).then((result) => {
                resolve(JSON.stringify(result));
            });
        });
    }

    classifyImage(input) {
        if (!this.imageMetadata || !this.imageClassifier) {
            this._isImageClassifying = false;
            return Promise.resolve([]);
        }
        this._isImageClassifying = true;
        return this.imageClassifier
            .classify(input)
            .then((result) => {
                this.imageProbableLabels = result.slice();
                this.imageProbableLabelsUpdated = true;
                return result;
            })
            .finally(() => {
                setTimeout(() => {
                    this.initImageProbableLabels();
                    this._isImageClassifying = false;
                }, this.interval);
            });
    }

    getImageLabel() {
        if (!this.imageProbableLabels || this.imageProbableLabels.length === 0)
            return "";
        const mostOne = this.getMostProbableOne(this.imageProbableLabels);
        return mostOne.confidence >= this.confidenceThreshold
            ? mostOne.label
            : "";
    }

    setConfidenceThreshold(args) {
        let threshold = Cast.toNumber(args.CONFIDENCE_THRESHOLD);
        threshold = MathUtil.clamp(threshold, 0, 1);
        this.confidenceThreshold = threshold;
    }

    getConfidenceThreshold() {
        return this.confidenceThreshold;
    }

    toggleClassification(args) {
        const state = args.CLASSIFICATION_STATE;
        if (this.timer) {
            clearTimeout(this.timer);
        }
        if (state === "on") {
            this.timer = setInterval(() => {
                this.classifyVideoImage();
            }, this.minInterval);
        }
    }

    setClassificationInterval(args) {
        if (this.timer) {
            clearTimeout(this.timer);
        }
        this.interval = args.CLASSIFICATION_INTERVAL * 1000;
        this.timer = setInterval(() => {
            this.classifyVideoImage();
        }, this.minInterval);
    }

    videoToggle(args) {
        const state = args.VIDEO_STATE;
        const transparency = Cast.toNumber(args.TRANSPARENCY);

        if (state === "off") {
            this.runtime.ioDevices.video.disableVideo();
        } else {
            this.runtime.ioDevices.video.enableVideo();
            this.globalVideoTransparency = transparency;
            this.runtime.ioDevices.video.setPreviewGhost(transparency);
            this.runtime.ioDevices.video.mirror = state === "on";
        }
    }

    classifyVideoImage() {
        if (this._isImageClassifying) return Promise.resolve([]);
        return this.classifyImage(this.input);
    }

    getVideoMenu() {
        return [
            {
                text: Message.off[this.locale],
                value: "off",
            },
            {
                text: Message.on[this.locale],
                value: "on",
            },
            {
                text: Message.video_on_flipped[this.locale],
                value: "on-flipped",
            },
        ];
    }

    getClassificationIntervalMenu() {
        return {
            acceptReporters: true,
            items: [
                {
                    text: "1",
                    value: "1",
                },
                {
                    text: "0.5",
                    value: "0.5",
                },
                {
                    text: "0.2",
                    value: "0.2",
                },
                {
                    text: "0.1",
                    value: "0.1",
                },
            ],
        };
    }
    setInput(args) {
        let input = args.INPUT;
        if (input === "webcam") {
            this.input = this.runtime.ioDevices.video.provider.video;
        } else {
            this.runtime.ioDevices.video.disableVideo();
            this.input = this.canvas;
        }
    }
    getClassificationMenu() {
        return [
            {
                text: Message.off[this.locale],
                value: "off",
            },
            {
                text: Message.on[this.locale],
                value: "on",
            },
        ];
    }
    getSoundLabelsWithoutBackgroundMenu() {
        let items = [Message.any[this.locale]];
        if (!this.soundMetadata) return items;
        let arr = this.soundMetadata.wordLabels;
        for (let i = 0; i < arr.length; i++) {
            if (arr[i] !== "_background_noise_") {
                items.push(arr[i]);
            }
        }
        return items;
    }
    getSoundLabelsWithoutBackgroundWithAnyWithoutOfMenu() {
        let items = [Message.any_without_of[this.locale]];
        if (!this.soundMetadata) return items;
        let arr = this.soundMetadata.wordLabels;
        for (let i = 0; i < arr.length; i++) {
            if (arr[i] !== "_background_noise_") {
                items.push(arr[i]);
            }
        }
        return items;
    }
    getSoundLabelsWithoutAnyMenu() {
        if (this.soundMetadata) {
            return this.soundMetadata.wordLabels;
        } else {
            return [""];
        }
    }
}

module.exports = tm2scratchBlocks;
